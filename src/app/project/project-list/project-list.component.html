<section class="project-container">
  <h2>My Projects</h2>

  <form (ngSubmit)="addProject(); $event.preventDefault()" class="add-form">
    <input
      type="text"
      placeholder="Project name"
  name="name"
  [ngModel]="newProjectName()"
  (ngModelChange)="newProjectName.set($event)"
    />

    <!-- Decided this was too wordy. -->
    <!-- <input
      type="text"
      placeholder="Description"
    name="description"
  [ngModel]="newProjectDesc()"
  (ngModelChange)="newProjectDesc.set($event)"
    /> -->
    <button type="submit" [disabled]="!newProjectName()">Add Project</button>
  </form>

  <ul>
    @for (p of projects(); track p.id) {
      <li class="project-card">
        <div class="project-header">
          <div>
            <h3>{{ p.name }}</h3>
            @if (p.description) {
              <p>{{ p.description }}</p>
            }
          </div>
          <div class="actions">
            <button (click)="toggleProject(p.id)">
              {{ isExpanded(p.id) ? '▲ Collapse' : '▼ Expand' }}
            </button>
            <button (click)="removeProject(p.id)">✖</button>
          </div>
        </div>
         <div class="nested">
           <section *ngIf="isExpanded(p.id)" class="force-section">
             <!-- Force list component goes here -->
             <app-force-list [projectId]="p.id"></app-force-list>
           </section>
         </div>
      </li>
    } @empty {
      <p class="empty">No projects yet. Add one above!</p>
    }
  </ul>
</section>
